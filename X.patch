Index: lib/src/main/java/com/lody/virtual/client/hook/patchs/am/StartActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- lib/src/main/java/com/lody/virtual/client/hook/patchs/am/StartActivity.java	(revision 4827f5b9e0d4f3c9c85ea04c2fd834c189591341)
+++ lib/src/main/java/com/lody/virtual/client/hook/patchs/am/StartActivity.java	(revision )
@@ -12,6 +12,7 @@
 import android.os.RemoteException;
 import android.util.TypedValue;
 
+import com.lody.virtual.IOHook;
 import com.lody.virtual.client.core.VirtualCore;
 import com.lody.virtual.client.env.Constants;
 import com.lody.virtual.client.hook.base.Hook;
@@ -132,7 +133,7 @@
             if (SCHEME_FILE.equals(packageUri.getScheme())) {
                 File sourceFile = new File(packageUri.getPath());
                 try {
-                    listener.onRequestInstall(sourceFile.getPath());
+                    listener.onRequestInstall(IOHook.getRedirectedPath(sourceFile.getPath()));
                     return true;
                 } catch (RemoteException e) {
                     e.printStackTrace();
Index: lib/src/main/java/com/lody/virtual/client/VClientImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- lib/src/main/java/com/lody/virtual/client/VClientImpl.java	(revision 4827f5b9e0d4f3c9c85ea04c2fd834c189591341)
+++ lib/src/main/java/com/lody/virtual/client/VClientImpl.java	(revision )
@@ -30,6 +30,7 @@
 import com.lody.virtual.client.env.VirtualRuntime;
 import com.lody.virtual.client.fixer.ContextFixer;
 import com.lody.virtual.client.hook.delegate.AppInstrumentation;
+import com.lody.virtual.client.hook.delegate.IORedirectDelegate;
 import com.lody.virtual.client.hook.patchs.am.HCallbackHook;
 import com.lody.virtual.client.hook.providers.ProviderHook;
 import com.lody.virtual.client.hook.secondary.ProxyServiceFactory;
@@ -331,6 +332,12 @@
         ApplicationInfo info = mBoundApplication.appInfo;
         IOHook.redirect("/data/data/" + info.packageName + "/", info.dataDir + "/");
         IOHook.redirect("/data/user/0/" + info.packageName + "/", info.dataDir + "/");
+        IORedirectDelegate delegate = VirtualCore.get().getIoRedirectDelegate();
+        if (delegate != null) {
+            Map<String, String> ioRedirect = delegate.getIORedirect();
+            for (Map.Entry<String, String> entry : ioRedirect.entrySet())
+                IOHook.redirect(entry.getKey(), entry.getValue());
+        }
         IOHook.hook();
     }
 
Index: lib/src/main/java/com/lody/virtual/client/hook/delegate/IORedirectDelegate.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- lib/src/main/java/com/lody/virtual/client/hook/delegate/IORedirectDelegate.java	(revision )
+++ lib/src/main/java/com/lody/virtual/client/hook/delegate/IORedirectDelegate.java	(revision )
@@ -0,0 +1,7 @@
+package com.lody.virtual.client.hook.delegate;
+
+import java.util.Map;
+
+public interface IORedirectDelegate {
+	public Map<String, String> getIORedirect();
+}
Index: lib/src/main/java/com/lody/virtual/client/core/VirtualCore.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- lib/src/main/java/com/lody/virtual/client/core/VirtualCore.java	(revision 4827f5b9e0d4f3c9c85ea04c2fd834c189591341)
+++ lib/src/main/java/com/lody/virtual/client/core/VirtualCore.java	(revision )
@@ -25,6 +25,7 @@
 import com.lody.virtual.client.env.VirtualRuntime;
 import com.lody.virtual.client.fixer.ContextFixer;
 import com.lody.virtual.client.hook.delegate.ComponentDelegate;
+import com.lody.virtual.client.hook.delegate.IORedirectDelegate;
 import com.lody.virtual.client.hook.delegate.PhoneInfoDelegate;
 import com.lody.virtual.client.hook.delegate.TaskDescriptionDelegate;
 import com.lody.virtual.client.ipc.LocalProxyUtils;
@@ -85,6 +86,16 @@
     private PhoneInfoDelegate phoneInfoDelegate;
     private ComponentDelegate componentDelegate;
     private TaskDescriptionDelegate taskDescriptionDelegate;
+
+    public IORedirectDelegate getIoRedirectDelegate() {
+        return ioRedirectDelegate;
+    }
+
+    public void setIoRedirectDelegate(IORedirectDelegate ioRedirectDelegate) {
+        this.ioRedirectDelegate = ioRedirectDelegate;
+    }
+
+    private IORedirectDelegate ioRedirectDelegate;
 
     private VirtualCore() {
     }
Index: app/build.gradle
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/build.gradle	(revision 4827f5b9e0d4f3c9c85ea04c2fd834c189591341)
+++ app/build.gradle	(revision )
@@ -3,11 +3,11 @@
 
 android {
     compileSdkVersion 25
-    buildToolsVersion "25.0.0"
+    buildToolsVersion "25.0.2"
     defaultConfig {
         applicationId "io.virtualapp"
         minSdkVersion 15
-        targetSdkVersion 21
+        targetSdkVersion 25
         versionCode 1
         versionName "1.0"
     }
@@ -32,10 +32,10 @@
 dependencies {
     compile fileTree(include: ['*.jar'], dir: 'libs')
     //Android Lib
-    compile 'com.android.support:appcompat-v7:23.4.0'
+    compile 'com.android.support:appcompat-v7:25.1.1'
     compile 'com.melnykov:floatingactionbutton:1.3.0'
-    compile 'com.android.support:recyclerview-v7:23.4.0'
-    compile 'com.android.support:percent:23.4.0'
+    compile 'com.android.support:recyclerview-v7:25.1.1'
+    compile 'com.android.support:percent:25.1.1'
     //Promise Support
     compile 'org.jdeferred:jdeferred-android-aar:1.2.4'
     //Preference mark Support
